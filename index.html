<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>メッセージカード（入力）</title>
<link rel="stylesheet" href="style.css">
<style>
body {
  padding: 4vw;
  font-family: 'Noto Serif JP', serif;
  background: linear-gradient(135deg, #fff1f5, #ffffff, #fce4ec);
  color: #333;
  margin:0;
}

h2 { 
  text-align: center; 
  margin-bottom: 4vw; 
  font-size: clamp(20px,5vw,26px); 
  color:#d81b60; 
  height:10vw;
}

/* カウントダウン */
#countdown {
  font-weight: bold;
  font-size: clamp(16px,4vw,20px);
  color: #d32f2f;
  background-color: #fff0f0;
  padding: 2vw;
  border-radius: 4vw;
  text-align: center;
  margin-bottom: 4vw;
  box-shadow: 0 0 5px rgba(0,0,0,0.2);
  max-width: 600px;
  margin: 0 auto 5vw;
}

/* カードフォーム */
.form {
  width: 100%;
  max-width: 600px;
  margin: 0 auto 5vw;
  padding: 4vw;
  border-radius: 4vw;
  box-shadow: 0 6px 16px rgba(0,0,0,0.12);
  background: linear-gradient(135deg, #fff9f4, #fff1e0);
  border: 0.5vw solid #ffd1dc;
  display: flex;
  flex-direction: column;
  gap: 3vw;
  box-sizing: border-box;
}

textarea, input, select, button {
  width: 100%;
  font-size: clamp(14px,3.5vw,16px);
  border-radius: 2vw;
  border: 1px solid #ddd;
  font-family: inherit;
  box-sizing: border-box;
}

textarea {
  resize: vertical;
  min-height: 20vh;
  max-height: 40vh;
}

/* ボタン */
button#sendBtn {
  background: #f48fb1;
  color: white;
  border: none;
  cursor: pointer;
  transition: 0.2s;
  padding: 3vw;
}
button#sendBtn:hover { background: #d81b60; }

/* カラー調整 */
#customization {
  max-width: 600px;
  margin: 0 auto 5vw;
  display: flex;
  flex-wrap: wrap;
  gap: 3vw;
}
#customization div { flex: 1 1 30%; min-width: 140px; }
#customization label { display:block; font-size: clamp(12px,3vw,14px); margin-bottom:1vw; }

/* フッター */
.footer { 
  text-align:center; 
  font-size: clamp(10px,3vw,12px); 
  color:#888; 
  margin: 5vw 0 3vw; 
}

@media(max-width:480px){
  body { padding: 4vw; }
  h2 { font-size: clamp(18px,6vw,22px); }
  #countdown { font-size: clamp(14px,5vw,16px); padding: 3vw; }
  .form { padding: 4vw; gap: 4vw; }
  textarea { min-height: 25vh; max-height: 45vh; }
  button#sendBtn { padding: 4vw; }
}
</style>
</head>
<body>

<h2>メッセージカード入力フォーム</h2>
<div id="countdown">締め切りまで：読み込み中…</div>

<div id="customization">
  <div>
    <label for="bgColor">背景色</label>
    <input type="color" id="bgColor" value="#fff9f4" style="height:45px">
  </div>
  <div>
    <label for="borderColor">枠線の色</label>
    <input type="color" id="borderColor" value="#ffd1dc" style="height:45px">
  </div>
  <div>
    <label for="textColor">文字色</label>
    <input type="color" id="textColor" value="#333333" style="height:45px">
  </div>
  <div>
    <label for="borderWidth">枠線の太さ</label>
    <input type="range" id="borderWidth" min="1" max="10" value="2">
  </div>
</div>

<div class="form">
  <select id="teacher">
    <option value="" disabled selected hidden>先生を選択してください</option>
    <option value="兵藤先生">兵藤先生</option>
    <option value="長屋先生">長屋先生</option>
    <option value="下村先生">下村先生</option>
  </select>

  <select id="no">
    <option value="" disabled selected hidden>番号を選択してください</option>
  </select>

  <input type="text" id="name" placeholder="名前">
  <textarea id="message" placeholder="先生へのメッセージ"></textarea>
  <button id="sendBtn">メッセージを送る</button>
</div>

<div class="footer">３年８組 </div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbz1a57zXdCmUqGvxdrWfLoEagRk-R32Vl-SbIpeMiS_5zdctbVhAlYsQ5bfEtQIquCx-g/exec";

const formCard = document.querySelector(".form");
const bgColorInput = document.getElementById("bgColor");
const borderColorInput = document.getElementById("borderColor");
const textColorInput = document.getElementById("textColor");
const borderWidthInput = document.getElementById("borderWidth");

function updateCardStyle() {
  formCard.style.background = bgColorInput.value;
  formCard.style.border = `${borderWidthInput.value}px solid ${borderColorInput.value}`;
  formCard.style.color = textColorInput.value;
  formCard.querySelectorAll("input, textarea, select").forEach(el=>{
    el.style.color = textColorInput.value;
  });
}
bgColorInput.addEventListener("input", updateCardStyle);
borderColorInput.addEventListener("input", updateCardStyle);
textColorInput.addEventListener("input", updateCardStyle);
borderWidthInput.addEventListener("input", updateCardStyle);
updateCardStyle();

const noInput = document.getElementById("no");
for(let i=1;i<=40;i++){
  const option=document.createElement("option");
  option.value=i;
  option.textContent=i;
  noInput.appendChild(option);
}

const DEADLINE = new Date("2026-02-23T23:59:59");
const countdownEl = document.getElementById("countdown");
function updateCountdown(){
  const diff = DEADLINE - new Date();
  if(diff<=0){
    countdownEl.textContent="受付は終了しました";
    document.getElementById("sendBtn").disabled=true;
    return;
  }
  const d=Math.floor(diff/(1000*60*60*24));
  const h=Math.floor((diff/(1000*60*60))%24);
  const m=Math.floor((diff/(1000*60))%60);
  const s=Math.floor((diff/1000)%60);
  countdownEl.textContent=`締め切りまで：${d}日 ${h}時間 ${m}分 ${s}秒`;
}
setInterval(updateCountdown,1000);
updateCountdown();

document.getElementById("sendBtn").addEventListener("click",()=>{
   const teacher=document.getElementById("teacher").value;
   const no=noInput.value.trim();
   const name=document.getElementById("name").value.trim();
   const message=document.getElementById("message").value.trim();
  
  if(!no || !name || !teacher || !message){
    alert("番号・名前・先生・メッセージを入力してください");
    return;
  }

  if(confirm(`送信しますか？\n番号: ${no}\n名前: ${name}\n先生: ${teacher}\nメッセージ:\n${message}`)){
    fetch(API_URL,{
      method:"POST",
      body:JSON.stringify({
        no, name, teacher, message,
        bgColor:bgColorInput.value,
        borderColor:borderColorInput.value,
        borderWidth:borderWidthInput.value,
        borderStyle:"solid",
        textColor:textColorInput.value
      })
    })
    .then(res=>res.json())
    .then(data=>alert(data.message || "送信完了"))
    .catch(()=>alert("送信失敗"));
  }
});
</script>

</body>
</html>









